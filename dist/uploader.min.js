!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ImageUploader=e()}}(function(){return function e(t,i,n){function r(d,o){if(!i[d]){if(!t[d]){var a="function"==typeof require&&require;if(!o&&a)return a(d,!0);if(s)return s(d,!0);var l=new Error("Cannot find module '"+d+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[d]={exports:{}};t[d][0].call(u.exports,function(e){var i=t[d][1][e];return r(i?i:e)},u,u.exports,e,t,i,n)}return i[d].exports}for(var s="function"==typeof require&&require,d=0;d<n.length;d++)r(n[d]);return r}({1:[function(e,t,i){t.exports={querySelector:function(e){return"string"==typeof e&&(e=document.querySelector(e)),e},extend:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},parseHTML:function(e){var t=document.createElement("div");t.innerHTML=e;var i;return i="undefined"!=typeof t.content||t.content?t.content.firstElementChild.cloneNode(!0):t.firstElementChild.cloneNode(!0)}}},{}],2:[function(e,t,i){function n(){this.el.classList.contains("uploader")||this.el.classList.add("uploader"),r.call(this)}function r(){var e='<div class="uploader-item"><input type="file" class="hidden" data-js="file-input"><button class="uploader__btn-add" data-js="openFilePicker">Add</button></div>';this.addView=o.parseHTML(e),this.fileInput=this.addView.querySelector('[data-js="file-input"]');var t=this;this.addView.querySelector('[data-js="openFilePicker"]').addEventListener("click",function(e){e.preventDefault(),t.editMode=!1,t.fileInput.click()}),this.fileInput.addEventListener("change",function(e){d.call(t,this)}),this.el.appendChild(this.addView)}function s(e,t){var i='<div class="uploader-item">';t&&(i+='<button class="uploader__btn" data-js="delete">Delete</button>'),i+='<button class="uploader__btn" data-js="edit">Edit</button><img src="'+e.url+'"></div>';var n=o.parseHTML(i),r=this;n.querySelector('[data-js="edit"]').addEventListener("click",function(e){e.preventDefault();var t=r.pictureViews.indexOf(n);r.editMode=!0,r.editIndex=t,r.fileInput.click()});var s=n.querySelector('[data-js="delete"]');return s&&s.addEventListener("click",function(e){e.preventDefault();var t=r.pictureViews.indexOf(n);-1!=t&&r["delete"](t)}),n}function d(e){if(0!=e.length){var t=e.files[0],i=this,n=new FileReader;n.onload=function(e){var t={url:e.target.result};i.editMode?i.update(i.editIndex,t):i.add(t)},n.readAsDataURL(t),this.fileInput.value=null}}var o=e("./helper"),a={maxItems:null},l=function(e,t){this.el=o.querySelector(e),this.options=o.extend(a,t),this.editMode=!1,this.editIndex=null,this.pictures=[],this.pictureViews=[],n.call(this)};l.prototype.add=function(e){this.pictures.push(e);var t=!0,i=s.call(this,e,t);this.el.insertBefore(i,this.addView),this.pictureViews.push(i),this.options.maxItems&&(this.pictures.length>=this.options.maxItems?this.addView.classList.add("hidden"):this.addView.classList.remove("hidden"))},l.prototype.update=function(e,t){this.pictures[e]=t,this.pictureViews[e].querySelector("img").setAttribute("src",t.url)},l.prototype["delete"]=function(e){var t=this.pictureViews[e];t.parentNode.removeChild(t),this.pictures.splice(e,1),this.pictureViews.splice(e,1),this.options.maxItems&&(this.pictures.length>=this.options.maxItems?this.addView.classList.add("hidden"):this.addView.classList.remove("hidden"))},t.exports=l},{"./helper":1}]},{},[2])(2)});